<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search Results</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #111; color: white; padding: 2rem; }
    .section { margin-bottom: 2rem; }
    .operator { margin-left: 1rem; }
    .operator-name { font-weight: bold; }
  </style>
  <style>
  body {
    font-family: Arial, sans-serif;
    background-color: #111;
    color: white;
    padding: 2rem;
  }

  .site-diagram {
    float: right;
    width: 40%;
    margin-left: 2rem;
    margin-bottom: 2rem;
  }

  .site-diagram img {
    width: 100%;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
  }

  .section {
    margin-bottom: 2rem;
  }

  .operator {
    margin-left: 1rem;
  }

  .operator-name {
    font-weight: bold;
  }
</style>

</head>
<body>
  <h1>Search Results</h1>
  <div id="siteDiagramContainer"></div>

  <div id="resultsText">Loading...</div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const query = params.get('q')?.toLowerCase();

    fetch('maps.json')
      .then(res => res.json())
      .then(data => {
        const resultEl = document.getElementById("resultsText");
        resultEl.innerHTML = '';

        for (const [mapName, mapInfo] of Object.entries(data)) {
          if (query && mapName.toLowerCase().includes(query)) {
            const desc = document.createElement('p');
            desc.textContent = mapInfo.description;
            resultEl.appendChild(desc);

            for (const [siteName, siteData] of Object.entries(mapInfo.sites))
              if (siteName.toLowerCase().includes("2f kids")) {
  const diagram = document.createElement('div');
  diagram.className = 'site-diagram';
  diagram.innerHTML = `<img src="oregon-2f-site.png" alt="Oregon 2F Site Diagram">`;
  document.getElementById("siteDiagramContainer").appendChild(diagram);
}
{
              const site = document.createElement('div');
              site.className = 'section';
              site.innerHTML = `<h2>${siteName}</h2>`;

              ['attack', 'defense'].forEach(side => {
                const sideData = siteData[side];
                const stratHeader = document.createElement('h3');
                stratHeader.textContent = side.charAt(0).toUpperCase() + side.slice(1) + " Strategies:";
                site.appendChild(stratHeader);

                const stratList = document.createElement('ul');
                sideData.strategies.forEach(s => {
                  const li = document.createElement('li');
                  li.textContent = s;
                  stratList.appendChild(li);
                });
                site.appendChild(stratList);

                const opHeader = document.createElement('h3');
                opHeader.textContent = side.charAt(0).toUpperCase() + side.slice(1) + " Operators:";
                site.appendChild(opHeader);

                sideData.operators.forEach(op => {
                  const div = document.createElement('div');
                  div.className = 'operator';
                  div.innerHTML = `<span class="operator-name">${op.name}</span> (${op.role}): ${op.task}`;
                  site.appendChild(div);
                });
              });

              resultEl.appendChild(site);
            }

            return;
          }
        }

        resultEl.textContent = "No results found for: " + query;
      });
  </script>
</body>
</html>
